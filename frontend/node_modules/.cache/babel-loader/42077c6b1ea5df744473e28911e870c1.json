{"ast":null,"code":"var _jsxFileName = \"/Users/davidzagardo/Dropbox/My Mac (Davids-MacBook-Pro.local)/Desktop/INTELLIJ/17514hw3/frontend/src/App.tsx\";\nimport Handlebars from \"handlebars\";\nimport { Component } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar oldHref = \"http://localhost:3000\";\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Create reference to \"Generate Email\" button\n  var cell = document.getElementById('cell');\n  const header = document.getElementById(\"instructions\"); // Add event listener to the generateEmail variable, specifying 'click'\n\n  cell === null || cell === void 0 ? void 0 : cell.addEventListener('click', function () {\n    header.textContent = \"it will rain today\";\n  });\n}); // var check = document.getElementById('cell');\n// check = \"\";\n// cell?.attributes('src') = \"\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    console.log(this);\n    this.state = {\n      cells: [{\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=0&y=0&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=1&y=0&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=2&y=0&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=3&y=0&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=4&y=0&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=0&y=1&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=1&y=1&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=2&y=1&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=3&y=1&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=4&y=1&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=0&y=2&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=1&y=2&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=2&y=2&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=3&y=2&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=4&y=2&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=0&y=3&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=1&y=3&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=2&y=3&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=3&y=3&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=4&y=3&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=0&y=4&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=1&y=4&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=2&y=4&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=3&y=4&w=\",\n        image: \"\"\n      }, {\n        text: \"\",\n        worker: \"\",\n        link: \"/play?x=4&y=4&w=\",\n        image: \"\"\n      }],\n      template: this.loadTemplate()\n    };\n  } // have cells be move or build with correct params\n  // those methods return the json obj of board\n  // update ui with convertToCell\n\n\n  loadTemplate() {\n    const src = document.getElementById(\"handlebars\");\n    return Handlebars.compile(src === null || src === void 0 ? void 0 : src.innerHTML, {});\n  }\n\n  convertToCell(p) {\n    // console.log(p);\n    const newCells = [];\n\n    for (var i = 0; i < p[\"cells\"].length; i++) {\n      for (var j = 0; j < p[\"cells\"][i].length; j++) {\n        var c = {\n          text: p[\"cells\"][i][j][\"text\"],\n          worker: p[\"cells\"][i][j][\"worker\"],\n          link: p[\"cells\"][i][j][\"link\"],\n          image: p[\"cells\"][i][j][\"image\"]\n        };\n        console.log(c);\n        newCells.push(c);\n      }\n    }\n\n    console.log(newCells);\n    return newCells;\n  }\n\n  async newGame() {\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    console.log(json);\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells\n    });\n  }\n\n  async play(url) {\n    const href = \"play?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells\n    });\n  }\n\n  async build(url) {\n    const href = \"build?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells\n    });\n  }\n\n  async switch() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/build\" && oldHref !== window.location.href) {\n      this.build(window.location.href);\n      oldHref = window.location.href;\n    }\n  }\n\n  render() {\n    this.switch();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.template({\n            cells: this.state.cells\n          })\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["/Users/davidzagardo/Dropbox/My Mac (Davids-MacBook-Pro.local)/Desktop/INTELLIJ/17514hw3/frontend/src/App.tsx"],"names":["Handlebars","Component","oldHref","document","addEventListener","cell","getElementById","header","textContent","App","constructor","props","console","log","state","cells","text","worker","link","image","template","loadTemplate","src","compile","innerHTML","convertToCell","p","newCells","i","length","j","c","push","newGame","response","fetch","json","setState","play","url","href","split","build","switch","window","location","render","__html"],"mappings":"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","sourcesContent":["import Handlebars from \"handlebars\"\nimport { Component } from 'react'\nimport './App.css'\n\nvar oldHref = \"http://localhost:3000\"\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  // Create reference to \"Generate Email\" button\n  var cell = document.getElementById('cell');\n  const header = document.getElementById(\"instructions\");\n  // Add event listener to the generateEmail variable, specifying 'click'\n  cell?.addEventListener('click', function() {\n    header!.textContent = \"it will rain today\";\n  });\n});\n\n// var check = document.getElementById('cell');\n// check = \"\";\n// cell?.attributes('src') = \"\";\n\ninterface Cell {\n  text: String;\n  worker: String;\n  link: String;\n  image: String;\n}\n\ninterface Cells {\n  cells: Array<Cell>,\n  template: HandlebarsTemplateDelegate<any>\n}\n\ninterface Props {\n}\n\nclass App extends Component<Props, Cells> {\n  constructor(props: Props) {\n    super(props);\n    console.log(this);\n    this.state = {\n      cells: [\n        { text: \"\", worker: \"\", link: \"/play?x=0&y=0&w=\", image: \"\" },\n        { text: \"\", worker: \"\", link: \"/play?x=1&y=0&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=2&y=0&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=3&y=0&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=4&y=0&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=0&y=1&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=1&y=1&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=2&y=1&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=3&y=1&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=4&y=1&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=0&y=2&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=1&y=2&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=2&y=2&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=3&y=2&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=4&y=2&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=0&y=3&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=1&y=3&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=2&y=3&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=3&y=3&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=4&y=3&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=0&y=4&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=1&y=4&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=2&y=4&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=3&y=4&w=\", image: \"\"  },\n        { text: \"\", worker: \"\", link: \"/play?x=4&y=4&w=\", image: \"\"  },\n      ],\n      template: this.loadTemplate()\n    };\n  }\n\n// have cells be move or build with correct params\n// those methods return the json obj of board\n// update ui with convertToCell\n\n  loadTemplate (): HandlebarsTemplateDelegate<any> {\n    const src = document.getElementById(\"handlebars\");\n    return Handlebars.compile(src?.innerHTML, {});\n  }\n\n  convertToCell(p: any): Array<Cell> {\n    // console.log(p);\n    const newCells: Array<Cell> = [];\n    for (var i = 0; i < p[\"cells\"].length; i++) {\n      for (var j = 0; j < p[\"cells\"][i].length; j++) {\n        var c: Cell = {\n          text: p[\"cells\"][i][j][\"text\"],\n          worker: p[\"cells\"][i][j][\"worker\"],\n          link: p[\"cells\"][i][j][\"link\"],\n          image: p[\"cells\"][i][j][\"image\"],\n        };\n        console.log(c);\n        \n        newCells.push(c);\n      }\n    }\n    console.log(newCells);\n\n    return newCells;\n  }\n\n  async newGame() {\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    console.log(json);\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({ cells: newCells });\n  }\n\n  async play(url: String) {\n    const href = \"play?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({ cells: newCells });\n  }\n\n  async build(url: String) {\n    const href = \"build?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({ cells: newCells });\n  }\n\n  async switch() {\n    if (\n      window.location.href === \"http://localhost:3000/newgame\" &&\n      oldHref !== window.location.href\n    ) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" &&\n      oldHref !== window.location.href\n    ) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    } else if (\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/build\" &&\n      oldHref !== window.location.href\n    ) {\n      this.build(window.location.href);\n      oldHref = window.location.href;\n    }\n  };\n\n  render() {\n    this.switch();\n    return (\n      <div className=\"App\">\n        <div\n          dangerouslySetInnerHTML={{\n            __html: this.state.template({ cells: this.state.cells }),\n          }}\n        />\n      </div>\n    )\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}